<?php
//ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² Sã€ä¸€ä¸ªå­—ç¬¦ä¸² T ã€‚è¯·ä½ è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥åœ¨ O(n) çš„æ—¶é—´å¤æ‚åº¦å†…ï¼Œä»Žå­—ç¬¦ä¸² S é‡Œé¢æ‰¾å‡ºï¼šåŒ…å« T æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚
//
//
//
// ç¤ºä¾‹ï¼š
//
// è¾“å…¥ï¼šS = "ADOBECODEBANC", T = "ABC"
//è¾“å‡ºï¼š"BANC"
//
//
//
// æç¤ºï¼š
//
//
// å¦‚æžœ S ä¸­ä¸å­˜è¿™æ ·çš„å­ä¸²ï¼Œåˆ™è¿”å›žç©ºå­—ç¬¦ä¸² ""ã€‚
// å¦‚æžœ S ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚
//
// Related Topics å“ˆå¸Œè¡¨ åŒæŒ‡é’ˆ å­—ç¬¦ä¸² Sliding Window
// ðŸ‘ 697 ðŸ‘Ž 0
//è§£é¢˜æ€è·¯ï¼š
//1.ä½¿ç”¨åŒæŒ‡é’ˆæ¥ç»´æŠ¤ä¸€ä¸ªå¯å˜çš„çª—å£ï¼Œä¸€å¼€å§‹å¢žåŠ  right æ‰©å¤§çª—å£ï¼Œç›´è‡³çª—å£ä¸­åŒ…å«å…¨éƒ¨çš„ç›®æ ‡å­—ç¬¦ï¼ˆå¯»æ‰¾å¯è¡Œè§£ï¼‰
//2.å¢žåŠ  left å‡å°çª—å£ï¼Œç›´è‡³çª—å£ä¸­ç¼ºå°‘ç›®æ ‡å­—ç¬¦ä¸ºæ­¢ï¼ˆå¯»æ‰¾æœ€ä¼˜è§£ï¼‰
//3. é‡å¤1ï¼Œ2ä¸¤è¿‡ç¨‹ï¼Œç›´è‡³ right æŒ‡é’ˆåˆ°è¾¾å­—ç¬¦ä¸²æœ«å°¾

//å…·ä½“çš„ç¼–ç æŠ€å·§ï¼šä½¿ç”¨2ä¸ª map æ¥ä¿å­˜ç›®æ ‡å­—ç¬¦å’Œæ»‘åŠ¨çª—å£å‡ºçŽ°å­—ç¬¦çš„æ•°æ®ï¼›å€ŸåŠ©validå˜é‡åˆ¤æ–­æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼›
//åˆå§‹åŒ–ç»“æžœçš„å¼€å§‹ä¸‹æ ‡åŠé•¿åº¦ï¼Œæ»‘åŠ¨è¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–°ä¸‹æ ‡åŠé•¿åº¦ï¼Œæœ€åŽé€šè¿‡ substr æ–¹æ³•è¿”å›žç»“æžœ
//leetcode submit region begin(Prohibit modification and deletion)
class Solution {

    /**
     * @param String $s
     * @param String $t
     * @return String
     */
    function minWindow($s, $t) {
        //åˆå§‹åŒ–ç›®æ ‡map
        $need = [];
        for ($i =0 ;$i<strlen($t);$i++) {
            $count = $need[$t[$i]] ?? 0;
            $need[$t[$i]] = ++$count;
        }
        //åˆå§‹åŒ–çª—å£
        $windows = [];

        //åŒæŒ‡é’ˆï¼Œç”¨äºŽç»´æŠ¤æ»‘åŠ¨çª—å£
        $left = $right = 0;

        //ç›®æ ‡æ‰€åœ¨çš„èµ·å§‹ä¸‹æ ‡åŠé•¿åº¦
        $start = 0;
        $len = PHP_INT_MAX;

        //æ»‘åŠ¨çª—å£ä¸­æ»¡è¶³å­—ç¬¦çš„æ•°é‡ï¼Œå½“ç­‰äºŽneedçš„é•¿åº¦æ—¶ï¼Œçª—å£åŠç»ˆæ­¢ç§»åŠ¨
        $valid_num = 0;

        while ($right < strlen($s)) {
            //å°†ç§»å…¥çª—å£çš„å­—ç¬¦
            $in_char = $s[$right];
            //æ‰©å¤§çª—å£
            $right++;

            //å½“å‰å­—ç¬¦æ˜¯å¦ä¸ºéœ€è¦çš„å­—ç¬¦
            if (array_key_exists($in_char, $need)) {
                $windows[$in_char] = $windows[$in_char] ?? 0;
                //å°†ç›®æ ‡å­—ç¬¦çš„æ•°é‡æ·»åŠ è‡³æ»‘åŠ¨çª—å£
                $windows[$in_char]++;

                //åˆ¤æ–­å½“å‰å­—ç¬¦æ˜¯å¦å·²åˆ°è¾¾ç›®æ ‡æ•°
                if ($need[$in_char] === $windows[$in_char]) {
                    $valid_num++;
                }
            }

            //åˆ¤æ–­çª—å£æ˜¯å¦è¦æ”¶ç¼©
            while ($valid_num === count($need)) {
                //æ›´æ–°è¦†ç›–å­ä¸²
                if ($right - $left < $len) {
                    $start = $left;
                    $len = $right - $left;
                }
                //å°†ç§»å‡ºçš„å­—ç¬¦
                $out_char = $s[$left];
                //å‡å°çª—å£
                $left++;
                //printf("window: [%d, %d), out_char: %s, start= %d,len = %d\n", $left, $right, $out_char, $start, $len);
                //å®Œæˆçª—å£å†…çš„ä¸€ç³»åˆ—æ›´æ–°æ“ä½œ
                //å½“å‰å­—ç¬¦æ˜¯å¦ä¸ºéœ€è¦çš„å­—ç¬¦
                if (array_key_exists($out_char, $need)) {
                    //åˆ¤æ–­å½“å‰å­—ç¬¦æ˜¯å¦å·²åˆ°è¾¾ç›®æ ‡æ•°
                    if ($need[$out_char] === $windows[$out_char]) {
                        $valid_num--;
                    }

                    //å‡å°‘ç›®æ ‡å­—ç¬¦çš„æ•°é‡
                    $windows[$out_char]--;
                }
            }
        }

        //è¿”å›žæœ€å°è¦†ç›–å­ä¸²
        return $len === PHP_INT_MAX ? '' : substr($s, $start, $len);
    }
}
//leetcode submit region end(Prohibit modification and deletion)
$obj = new Solution();

$s = 'a';
$t = 'a';
echo $obj->minWindow($s, $t);